
<%- include("../partials/user/header")%>


<div class="container-fluid d-flex">

  <div class="sidebar">

    <%- include("../partials/user/profileSidebar")%>

  </div>

<div class="address_container container mt-4 ">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h4 class="mb-0">Address</h4>
    <a href="/add_address?redirect=address" class="btn btn-dark">Add New Address</a>
  </div>

  
  <div class="row">
   <%if(userAddress){%>
    <%userAddress.address.forEach((address)=>{%>
    <div class="col-md-6 col-lg-4">
      <div class="address-card">
        <%if(address.isDefault){%>
         <span class="badge text-dark border border-dark mb-3">Default</span>
        <%}%>
        <h5 class="mb-2 text-capitalize"><%=address.name%></h5>
        <p class="mb-1 text-capitalize"><%=address.building%></p>
        <p class="mb-1 text-capitalize"><%=address.area%>, <%=address.city%></p>
        <p class="mb-1 text-capitalize">Landmark: <%=address.landmark%></p>
        <p class="mb-1 text-capitalize"><%=address.state%>, <%=address.pincode%></p>
        <p class="mb-1">Phone: <%=address.phone%></p>
        <p class="mb-2">Alternate Phone: <%=address.alternatePhone%></p>

        <div class="address-actions">

          <a href="/edit_address?id=<%=address._id%>&redirect=address" class="btn btn-sm btn-outline-secondary">Edit</a>
          <a href="#" class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteModal" data-id="<%= address._id %>">Delete</a>
          <%if(!address.isDefault){%>
          <a href="/set_default?id=<%=address._id%>" class="btn btn-sm btn-outline-secondary">Set as Default</a>
          <%}%>
        </div>
      </div>
    </div>
    <%})%>
    <%}%>
    
  </div>
</div>

</div>

<!-- Delete Modal -->

<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Confirm Before Delete</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        Are you sure you want to delete this address?
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <a id="confirmDeleteBtn" href="#" class="btn btn-danger">Delete</a>
      </div>

    </div>
  </div>
</div>

<!--  -->

<script>
  const deleteModal = document.getElementById('deleteModal');
  deleteModal.addEventListener('show.bs.modal', function (event) {
    const trigger = event.relatedTarget;
    const id = trigger.getAttribute('data-id');
    const confirmBtn = document.getElementById('confirmDeleteBtn');
    confirmBtn.href = `/delete_address?id=${id}`;
  });
</script>




 <%- include("../partials/user/footer")%>
   <script src="js/jquery.min.js"></script>
   <script src="js/plugins.js"></script>
   <script src="js/SmoothScroll.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
     integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
     crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
   <script src="js/script.min.js"></script>
 </body>
 
 </html>